---
title: "Android10及更高版本网络连接判断"
date: 2019-11-13 08:01:00 +0800
excerpt: "Android10及更高版本网络连接判断 Android10开始NetworkInfo被标记为Deprecated废弃状态，替代方案是NetworkCapabilities："
categories: ["Android"]
tags: ["Android"]
cover: /upload/1074685.jpg
permalink: /archives/1697167393895
---
# Android10及更高版本网络连接判断

Android10开始NetworkInfo被标记为Deprecated废弃状态，替代方案是NetworkCapabilities：
```kotlin
fun isWifiConnection(context: Context): Boolean {
    val manager = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
    return manager.activeNetwork?.let {
        val capabilities = manager.getNetworkCapabilities(it)
        capabilities != null && capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)
    } ?: false
}

fun isMobileConnection(context: Context): Boolean {
    val manager = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
    return manager.activeNetwork?.let {
        val capabilities = manager.getNetworkCapabilities(it)
        capabilities != null && capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)
    } ?: false
}
```
